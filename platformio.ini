[env:lilygo-t3-s3]
platform = espressif32
board = lilygo-t3-s3
framework = arduino
board_build.partitions = huge_app.csv
upload_protocol = esptool

; C++20 configuration (remove old standard, add new one)
build_unflags = 
    -std=gnu++11
    -std=gnu++14


; Build options - matching Meshtastic T3S3 configuration + C++17
build_flags = 
    -DLILYGO_T3S3_V1
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=0
    -DARDUINO_RUNNING_CORE=1
    -DARDUINO_EVENT_RUNNING_CORE=1
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_ARDUHAL_LOG_COLORS=1
    -std=gnu++17

; Upload options
monitor_speed = 115200
upload_speed = 921600

; Libraries
lib_deps = 
    ; Mesh networking
    meshtastic/Meshtastic@^0.0.7
    ; LoRa support for SX1276 (T3S3 915MHz hardware for North America) - used by Meshtastic
    jgromes/RadioLib@^6.6.0
    ; JSON handling
    bblanchon/ArduinoJson@^6.21.4
    ; Power management
    adafruit/Adafruit LC709203F@^1.3.1
    ; Display (optional)
    adafruit/Adafruit SSD1306@^2.5.7
    adafruit/Adafruit GFX Library@^1.11.9

; Debug configuration
debug_tool = esp-prog
debug_init_break = tbreak setup

; File system
board_build.filesystem = littlefs

; change microcontroller
board_build.mcu = esp32s3

; change MCU frequency
board_build.f_cpu = 240000000L